<!DOCTYPE html>
<html style="font-size: 16px;" xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Открытие</title>
    <link rel="stylesheet" th:href="@{/css/main.css}" media="screen">
    <link rel="stylesheet" th:href="@{/css/open.css}" media="screen">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
</head>

<body class="u-body u-xl-mode">
    <header class="u-align-center-xs u-border-1 u-border-grey-25 u-clearfix u-grey-10 u-header u-sticky u-sticky-fa14 u-header" id="sec-f9f5">
        <form th:action="@{/search}" method="post" class="u-clearfix u-sheet u-sheet-1">

            <input type="submit" value="Поиск" class="u-align-right u-border-none u-btn u-button-style u-grey-25 u-btn-1">
            <p class="u-align-center-xs u-align-left-lg u-align-left-md u-align-left-sm u-align-left-xl u-text u-text-1">
                XANSTORE</p>
            <p sec:authorize="isAuthenticated()" class="u-align-left u-text u-text-2">admin</p>
            <div class="u-align-center u-border-1 u-border-grey-15 u-search u-search-right u-search-1">
                <button class="u-search-button" type="submit">
        <span class="u-search-icon u-spacing-10 u-text-grey-40">
          <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 56.966 56.966" style=""><use
                  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-b04b"></use></svg>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
               id="svg-b04b" x="0px" y="0px" viewBox="0 0 56.966 56.966"
               style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" class="u-svg-content"><path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"></path><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
        </span>
        </button>
                <input th:field="*{product.name}" class="u-search-input" type="search" name="search" value="" placeholder="Search">
            </div>
            <a th:href="@{/admin/pageToAddProduct}">
                <p sec:authorize="isAuthenticated()">Добавление</p>
            </a>
            <a th:href="@{/admin/pageToEditProduct}">
                <p sec:authorize="isAuthenticated()">Изменение</p>
            </a>
        </form>

    </header>
    <div class="openImgMain" id="openImgMain">
        <img class="openImg" id="openImg">
    </div>
    <section class="u-align-left u-clearfix u-palette-4-light-2 u-section-1" id="sec-5758">
        <div class="u-align-center u-clearfix u-gutter-0 u-layout-spacing-vertical u-layout-wrap u-layout-wrap-1">
            <div class="u-layout" style="">
                <div class="u-layout-row" style="">
                    <div class="u-size-20-sm u-size-20-xl u-size-20-xs u-size-23-lg u-size-60-md">
                        <div class="u-layout-row">
                            <div class="u-container-style u-layout-cell u-left-cell u-size-60 u-layout-cell-1" src="">
                                <div class="u-container-layout u-valign-top-md u-valign-top-sm u-valign-top-xs u-container-layout-1">
                                    <div class="u-carousel u-gallery u-layout-thumbnails u-lightbox u-no-transition u-show-text-always u-gallery-1" data-interval="5000" data-u-ride="carousel" id="carousel-f303">
                                        <div class="u-carousel-inner u-gallery-inner" role="listbox">

                                            <div class="u-active u-carousel-item u-gallery-item u-carousel-item-1">
                                                <div class="u-back-slide">
                                                    <img class="u-back-image u-expanded" id="imgMain">
                                                </div>

                                            </div>


                                        </div>

                                        <ol class="u-carousel-thumbnails u-spacing-10 u-carousel-thumbnails-1" id="imgList">

                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="u-size-37-lg u-size-40-sm u-size-40-xl u-size-40-xs u-size-60-md" style="">
                        <div class="u-layout-col" style="">
                            <div class="u-size-40">
                                <div class="u-layout-row">
                                    <div class="u-align-left u-container-style u-layout-cell u-right-cell u-size-60 u-layout-cell-2">
                                        <div class="u-container-layout u-container-layout-2">
                                            <h3 class="u-text u-text-1"> Kateqoriya:</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="u-size-20" style="">
                                <div class="u-layout-row" style="">
                                    <div class="u-align-left u-container-style u-layout-cell u-size-60 u-layout-cell-3">
                                        <div class="u-container-layout u-container-layout-3" th:each="a : ${productOpen}">
                                            <p class="u-text u-text-4" id="dimensions" th:text="${a.getDimensions}">
                                                Dimensions:</p>
                                            <p class="u-text u-text-4" id="img" th:text="${a.getPhoto}">Img:</p>
                                            <p class="u-text u-text-4" id="cost" th:text="${a.getCost}">Cost:</p>

                                            <p class="u-text u-text-2" th:text="'Telefon: '+ ${a.getPhone}">Telefon:</p>
                                            <p class="u-text u-text-3" id="color" th:text="'Rəng: '+ ${a.getColor}">Məhsulun nomresi:</p>
                                            <p class="u-align-left u-text u-text-4" id="costValue" th:text="'Qiymət: ' + ${a.getCost} + 'azn'">Qiymət:</p>
                                            <p class="u-text u-text-5">Ölcü:</p>
                                            <div class="u-expanded-width-lg u-expanded-width-md u-expanded-width-sm u-expanded-width-xs u-list u-list-1">
                                                <div class="u-repeater u-repeater-1" id="dimenBlock">


                                                </div>
                                            </div>
                                            <p class="u-text u-text-6" th:text="'Təsviri: '+${a.getText}"> Təsviri:</p>
                                            <a sec:authorize="isAuthenticated()" th:href="@{/delete/product/{id}  (id=${a.getId()})}">Удалить</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="u-align-left u-container-style u-group u-hidden-md u-hidden-sm u-hidden-xs u-shape-rectangle u-uploaded-video u-video u-video-cover u-video-1">
            <div class="u-background-video u-expanded" style="">
                <div class="embed-responsive">
                    <video class="embed-responsive-item" data-autoplay="1" loop="" muted="" autoplay="autoplay" playsinline="">
              <source th:src="@{/img/Композиция1.mp4}"  type="video/mp4">
              <p>Your browser does not support HTML5 video.</p>
            </video>
                </div>
            </div>
            <div class="u-container-layout u-valign-top u-container-layout-16"></div>
        </div>
        <div class="u-align-right u-container-style u-group u-hidden-md u-hidden-sm u-hidden-xs u-shape-rectangle u-uploaded-video u-video u-video-cover u-video-2">
            <div class="u-background-video u-expanded" style="">
                <div class="embed-responsive">
                    <video class="embed-responsive-item" data-autoplay="1" loop="" muted="" autoplay="autoplay" playsinline="">
              <source th:src="@{/img/Композиция1.mp4}"  type="video/mp4">
              <p>Your browser does not support HTML5 video.</p>
            </video>
                </div>
            </div>
            <div class="u-container-layout u-container-layout-17"></div>
        </div>
    </section>
    <section class="u-clearfix u-section-2" id="sec-6c5b">
        <div class="u-clearfix u-sheet u-sheet-1">
            <div class="u-expanded-width u-list u-list-1">
                <div class="u-repeater u-repeater-1">

                    <div class="u-container-style u-list-item u-repeater-item">
                        <div class="u-container-layout u-similar-container u-container-layout-1" th:each="a : ${comentAll}">
                            <a  sec:authorize="isAuthenticated()" th:href="@{/{id}/deleteComent (id=${a.getId()})}" class="u-border-none u-btn u-button-style u-grey-25 u-btn-1">DEL</a>
                            <h3 th:text="${a.name}" class="u-text u-text-default u-text-1">Имя Пользователя</h3>
                            <h6  th:text="${a.text}"class="u-text u-text-2">комент</h6>
                            <p  th:text="${a.date}"class="u-text u-text-3">дата</p>
                        </div>
                    </div>

                </div>
            </div>
            <div class="u-align-center u-form u-form-1" >
                <form  th:action="@{/addComent}" method="post" class="u-clearfix u-form-spacing-10 u-form-vertical u-inner-form" source="custom" name="form" style="padding: 10px;">

                    <div th:each="a : ${productOpen}">
                        <input style="display:none;" th:value="${a.id}" type="text" placeholder="Adınızı yazin"  name="id" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" required="">
                    </div>

                    <div class="u-form-group u-form-name">
                        <label for="name-7a8f" class="u-label">Ad</label>
                        <input th:field="*{coment.name}" type="text" placeholder="Adınızı yazin" id="name-7a8f" name="name" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" required="">
                    </div>
                    <div class="u-form-email u-form-group">
                        <label for="email-7a8f" class="u-label">Komentariy</label>
                        <input th:field="*{coment.text}" type="text" placeholder="Koment yazin" id="email-7a8f" name="email" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white" required="">
                    </div>
                    <div class="u-align-center u-form-group u-form-submit">
                        <input type="submit" class="u-border-none u-btn u-btn-submit u-button-style u-grey-15 u-btn-4" placeholder="Gondər">
                    </div>
                </form>
            </div>
        </div>
    </section>

    <footer class="u-clearfix u-footer u-grey-10" id="sec-1161">
        <div class="u-clearfix u-sheet u-valign-middle-lg u-valign-middle-md u-valign-middle-xl u-sheet-1">
            <div class="u-align-left u-social-icons u-spacing-10 u-social-icons-1">
                <a class="u-social-url" target="_blank" href="https://www.facebook.com/XANstore-100805595873208/" title="xanface"><span class="u-icon u-icon-circle u-social-facebook u-social-icon u-icon-1"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112.2 112.2" style="width: 23px;"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-7562"></use></svg><svg x="0px" y="0px" viewBox="0 0 112.2 112.2" enable-background="new 0 0 112.2 112.2" xml:space="preserve" id="svg-7562" class="u-svg-content"><path d="M75.5,28.8H65.4c-1.5,0-4,0.9-4,4.3v9.4h13.9l-1.5,15.8H61.4v45.1H42.8V58.3h-8.8V42.4h8.8V32.2 c0-7.4,3.4-18.8,18.8-18.8h13.8v15.4H75.5z"></path></svg></span>
          </a>
                <a class="u-social-url" target="_blank" href=""><span class="u-icon u-icon-circle u-social-icon u-social-twitter u-icon-2"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112.2 112.2" style="width: 23px;"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-37ac"></use></svg><svg x="0px" y="0px" viewBox="0 0 112.2 112.2" enable-background="new 0 0 112.2 112.2" xml:space="preserve" id="svg-37ac" class="u-svg-content"><path d="M92.2,38.2c0,0.8,0,1.6,0,2.3c0,24.3-18.6,52.4-52.6,52.4c-10.6,0.1-20.2-2.9-28.5-8.2 c1.4,0.2,2.9,0.2,4.4,0.2c8.7,0,16.7-2.9,23-7.9c-8.1-0.2-14.9-5.5-17.3-12.8c1.1,0.2,2.4,0.2,3.4,0.2c1.6,0,3.3-0.2,4.8-0.7 c-8.4-1.6-14.9-9.2-14.9-18c0-0.2,0-0.2,0-0.2c2.5,1.4,5.4,2.2,8.4,2.3c-5-3.3-8.3-8.9-8.3-15.4c0-3.4,1-6.5,2.5-9.2 c9.1,11.1,22.7,18.5,38,19.2c-0.2-1.4-0.4-2.8-0.4-4.3c0.1-10,8.3-18.2,18.5-18.2c5.4,0,10.1,2.2,13.5,5.7c4.3-0.8,8.1-2.3,11.7-4.5 c-1.4,4.3-4.3,7.9-8.1,10.1c3.7-0.4,7.3-1.4,10.6-2.9C98.9,32.3,95.7,35.5,92.2,38.2z"></path></svg></span>
          </a>
                <a class="u-social-url" target="_blank" href=""><span class="u-icon u-icon-circle u-social-icon u-social-instagram u-icon-3"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112.2 112.2" style="width: 23px;"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-985e"></use></svg><svg x="0px" y="0px" viewBox="0 0 112.2 112.2" enable-background="new 0 0 112.2 112.2" xml:space="preserve" id="svg-985e" class="u-svg-content"><path d="M55.9,32.9c-12.8,0-23.2,10.4-23.2,23.2s10.4,23.2,23.2,23.2s23.2-10.4,23.2-23.2S68.7,32.9,55.9,32.9z M55.9,69.4c-7.4,0-13.3-6-13.3-13.3c-0.1-7.4,6-13.3,13.3-13.3s13.3,6,13.3,13.3C69.3,63.5,63.3,69.4,55.9,69.4z"></path><path d="M79.7,26.8c-3,0-5.4,2.5-5.4,5.4s2.5,5.4,5.4,5.4c3,0,5.4-2.5,5.4-5.4S82.7,26.8,79.7,26.8z"></path><path d="M78.2,11H33.5C21,11,10.8,21.3,10.8,33.7v44.7c0,12.6,10.2,22.8,22.7,22.8h44.7c12.6,0,22.7-10.2,22.7-22.7 V33.7C100.8,21.1,90.6,11,78.2,11z M91,78.4c0,7.1-5.8,12.8-12.8,12.8H33.5c-7.1,0-12.8-5.8-12.8-12.8V33.7 c0-7.1,5.8-12.8,12.8-12.8h44.7c7.1,0,12.8,5.8,12.8,12.8V78.4z"></path></svg></span>
          </a>
                <a class="u-social-url" target="_blank" href=""><span class="u-icon u-icon-circle u-social-icon u-social-linkedin u-icon-4"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112.2 112.2" style="width: 23px;"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-cb4a"></use></svg><svg x="0px" y="0px" viewBox="0 0 112.2 112.2" enable-background="new 0 0 112.2 112.2" xml:space="preserve" id="svg-cb4a" class="u-svg-content"><path d="M33.8,96.8H14.5v-58h19.3V96.8z M24.1,30.9L24.1,30.9c-6.6,0-10.8-4.5-10.8-10.1c0-5.8,4.3-10.1,10.9-10.1 S34.9,15,35.1,20.8C35.1,26.4,30.8,30.9,24.1,30.9z M103.3,96.8H84.1v-31c0-7.8-2.7-13.1-9.8-13.1c-5.3,0-8.5,3.6-9.9,7.1 c-0.6,1.3-0.6,3-0.6,4.8V97H44.5c0,0,0.3-52.6,0-58h19.3v8.2c2.6-3.9,7.2-9.6,17.4-9.6c12.7,0,22.2,8.4,22.2,26.1V96.8z"></path></svg></span>
          </a>
            </div>
            <p class="u-align-center u-text u-text-1">NeMo</p>
        </div>
    </footer>

</body>
<script>
    $(document).ready(function() {
        $("#openImgMain").hide();

        $("#imgMain").click(function openImg(e) {
            var a = $("#imgMain").attr('src');
            $("#openImgMain").show();
            $("#openImg").attr("src", a);

        });
        $("#openImgMain").click(function() {
            $("#openImgMain").hide();

        });

        function ImageView(e) {
            var a1 = $(e).attr('src');
            var a2 = $("#imgMain").attr('src')
            if (a1 == a2 || a1 != "" || a2 != "") {
                $("#imgMain").attr('src', a1)
            } else {
                $("#imgMain").attr('src', a1)
            }
        }
        // ----------------------
        var cost = document.getElementById("cost").innerHTML;
        var costOf = cost.split(",");
        $('#cost').remove();

        // --------------------------------------

        var dimensions = document.getElementById("dimensions").innerHTML;
        var dimensionsOf = dimensions.split(",");
        $('#dimensions').remove();
        document.getElementById("costValue").innerHTML = 'Qiymət: ' + dimensionsOf[0] + ' azn';

        var dimenBlock = document.getElementById("dimenBlock");

        for (var i = 0; i < dimensionsOf.length; i++) {
            dimenBlock.innerHTML +=
                `
            <div class="u-container-style u-list-item u-repeater-item">
              <div class="u-container-layout u-similar-container u-container-layout-4">
               <button onclick="ChangeCost(this)" id='changeCost_` + i + `' class="u-border-none u-btn u-button-style u-custom-color-3 u-text-body-alt-color u-btn-1">` + dimensionsOf[i] + `</button>
             <p style='display:none;' id ="changeCost_` + i + `_value">` + costOf[i] + `</p>
               </div>
            </div>
            `;

        }

        // ---------------------------------------

        var color = document.getElementById("color").innerHTML;
        var colorOf = color.split(",");
        //        $('#color').remove();

        // ---------------------------------------

        var img = document.getElementById("img").innerHTML;
        var imgOf = img.split(",");
        $('#img').remove();
        console.log(imgOf)

        getImage2(imgOf[0]);
        var count = 1;
        for (var i = 0; i < imgOf.length; i++) {

            getImage3(imgOf[i], count);
            count++;
        }



        //
    });

    function getImage2(pictureName) {
        toDataURL('/home/rest/img2/' + pictureName, function(dataUrl) {
            console.log(pictureName)
            console.log('RESULT:', dataUrl)
            document.getElementById("imgMain").src = dataUrl;
        })
    }

    function getImage3(pictureName, id) {
        toDataURL('/home/rest/img2/' + pictureName, function(dataUrl) {
            console.log(pictureName)
            console.log('RESULT:', dataUrl)
            var li = document.createElement("li");
            li.classList.add("u-carousel-thumbnail", "u-carousel-thumbnail-1")
            var img = document.createElement("img");
            img.classList.add("u-carousel-thumbnail-image", "u-image")
            img.setAttribute('id', 'imgBlock');
            img.src = dataUrl
            img.setAttribute("onclick", "ImageView(this)");
            li.appendChild(img);
            document.getElementById("imgList").appendChild(li);
        })
    }

    function toDataURL(url, callback) {
        var xhr = new XMLHttpRequest();
        xhr.onload = function() {
            var reader = new FileReader();
            reader.onloadend = function() {
                callback(reader.result);
            }
            reader.readAsDataURL(xhr.response);
        };
        xhr.open('GET', url);
        xhr.responseType = 'blob';
        xhr.send();
    }




    function ChangeCost(e) {
        var id = $(e).attr('id');
        var costOfdis = document.getElementById(id + "_value").innerHTML;
        document.getElementById("costValue").innerHTML = 'Qiymət: ' + costOfdis + ' azn';
    }

    function ImageView(e) {
        var a1 = $(e).attr('src');
        var a2 = $("#imgMain").attr('src')
        if (a1 == a2 || a1 != "" || a2 != "") {
            $("#imgMain").attr('src', a1)
        } else {
            $("#imgMain").attr('src', a1)
        }
    }
</script>

</html>